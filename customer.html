<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NIAPAY — Add Customer</title>


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="customer.min.css" />
</head>
<body>
  <main class="page">
    <header class="header">
      <div class="brand">
        <img src="Images/niapaylogo.png" alt="NIAPAY" class="logo" />
        <div>
          <h1 class="title">NIAPAY Carwash System</h1>
          <p class="subtitle">Add a car, choose services & track progress — fair assignment & transparent records.</p>
        </div>
      </div>
    </header>

    <section class="controls">
      <button id="addBtn" class="add-btn" aria-expanded="false" aria-controls="addForm" title="Add new customer">
        <span class="plus">+</span>
      </button>
      <p class="add-instruction">Press the plus to add a customer's details</p>
    </section>

    <!-- Expandable form -->
    <section id="addForm" class="add-form" aria-hidden="true">
      <form id="customerForm" novalidate>
        <div class="row">
          <label class="field">
            <span>Number plate</span>
            <input id="plate" name="plate" type="text" placeholder="KAA 123A" required />
          </label>

          <label class="field">
            <span>Car model</span>
            <input id="model" name="model" type="text" placeholder="Toyota Corolla" required />
          </label>
        </div>

        <div class="row">
          <label class="field">
            <span>Color</span>
            <input id="color" name="color" type="text" placeholder="White" required />
          </label>

          <label class="field">
            <span>Phone (optional)</span>
            <input id="phone" name="phone" type="tel" placeholder="+2547XXXXXXXX" />
          </label>
        </div>

        <div class="services-block">
          <span class="services-title">Select Services</span>
          <div class="services-grid" role="list">
            <!-- Each service toggle uses data-price -->
            <button type="button" class="service" data-price="200" aria-pressed="false" role="listitem">
              <div class="service-name">Normal Wash</div>
              <div class="service-price">Kshs 200</div>
            </button>

            <button type="button" class="service" data-price="200" aria-pressed="false" role="listitem">
              <div class="service-name">Vacuum Wash</div>
              <div class="service-price">Kshs 200</div>
            </button>

            <button type="button" class="service" data-price="300" aria-pressed="false" role="listitem">
              <div class="service-name">Wax & Shine</div>
              <div class="service-price">Kshs 300</div>
            </button>

            <button type="button" class="service" data-price="400" aria-pressed="false" role="listitem">
              <div class="service-name">Interior Deep Clean</div>
              <div class="service-price">Kshs 400</div>
            </button>
          </div>
        </div>

        <div class="row payment-row">
          <label class="field payment-field">
            <span>Payment method</span>
            <div class="payment-options">
              <label><input type="radio" name="payment" value="cash" checked /> Cash</label>
              <label><input type="radio" name="payment" value="mpesa" /> M-Pesa</label>
            </div>
          </label>

          <div class="field total-field">
            <span>Total</span>
            <div id="total" class="total-amount">Kshs 0</div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn primary">Done</button>
          <button type="button" id="cancelBtn" class="btn ghost">Cancel</button>
        </div>
      </form>
    </section>

    <!-- Cards list -->
    <section class="cards-section">
      <h2 class="section-title">Queued Cars</h2>
      <div id="cardsContainer" class="cards-container" aria-live="polite"></div>
    </section>
  </main>

  <!-- Receipt Modal -->
  <div id="receiptModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-panel">
      <button id="closeReceipt" class="modal-close" aria-label="Close receipt">&times;</button>
      <div class="receipt">
        <h3>Receipt</h3>
        <div class="receipt-row"><strong>Number plate:</strong> <span id="r_plate"></span></div>
        <div class="receipt-row"><strong>Car model:</strong> <span id="r_model"></span></div>
        <div class="receipt-row"><strong>Color:</strong> <span id="r_color"></span></div>
        <div class="receipt-row"><strong>Phone:</strong> <span id="r_phone"></span></div>
        <div class="receipt-row"><strong>Services:</strong>
          <ul id="r_services"></ul>
        </div>
        <div class="receipt-row"><strong>Payment:</strong> <span id="r_payment"></span></div>
        <div class="receipt-row total-row"><strong>Total:</strong> <span id="r_total"></span></div>
        <div class="receipt-actions">
          <button id="markFinished" class="btn primary">Mark Finished</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loader -->
<div id="loader" class="loader">
  <div class="spinner"></div>
  <p>Loading jobs...</p>
</div>



  <!-- Scripts -->
  <script type="module" src="customer.min.js"></script>

  <!-- Firebase logic -->
<script type="module" src="customer-firebase.min.js"></script>

</body>
</html>
